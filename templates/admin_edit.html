{% extends "base.html" %}
{% block title %}{{ 'Modifica' if agent else 'Nuovo' }} agente{% endblock %}

{% block content %}
<div class="form-card">
  <h2>{{ 'Modifica' if agent else 'Nuovo' }} agente</h2>

  {% if error %}
    <p class="error">{{ error }}</p>
  {% endif %}

  <form method="post" enctype="multipart/form-data" class="grid-two">

    <div>
      <label>Slug (per l'URL)</label>
      <input name="slug" value="{{ agent.slug if agent else '' }}" required>

      <label>Nome</label>
      <input name="name" value="{{ agent.name if agent else '' }}" required>

      <label>Cognome</label>
      <input name="surname" value="{{ agent.surname if agent else '' }}" required>

      <label>Azienda</label>
      <input name="company" value="{{ agent.company if agent else '' }}">

      <label>Posizione lavorativa</label>
      <input name="role" value="{{ agent.role if agent else '' }}">

      <label>Descrizione / Bio</label>
      <textarea name="bio" rows="4">{{ agent.bio if agent else '' }}</textarea>
    </div>

    <div>
      <label>Telefono mobile</label>
      <input name="phone_mobile" value="{{ agent.phone_mobile if agent else '' }}">

      <label>Telefono ufficio</label>
      <input name="phone_office" value="{{ agent.phone_office if agent else '' }}">

      <label>Email (separa con virgola)</label>
      <input name="emails" value="{{ agent.emails if agent else '' }}" placeholder="a@x.it, b@x.it">

      <label>Siti web (separa con virgola)</label>
      <input name="websites" value="{{ agent.websites if agent else '' }}" placeholder="pay4you.store, ...">

      <label>PEC</label>
      <input name="pec" value="{{ agent.pec if agent else '' }}">

      <label>Partita IVA</label>
      <input name="piva" value="{{ agent.piva if agent else '' }}">

      <label>Codice SDI</label>
      <input name="sdi" value="{{ agent.sdi if agent else '' }}">
    </div>

    <div>
      <h3>Social</h3>

      <label>Facebook</label>
      <input name="facebook" value="{{ agent.facebook if agent else '' }}">

      <label>Instagram</label>
      <input name="instagram" value="{{ agent.instagram if agent else '' }}">

      <label>LinkedIn</label>
      <input name="linkedin" value="{{ agent.linkedin if agent else '' }}">

      <label>TikTok</label>
      <input name="tiktok" value="{{ agent.tiktok if agent else '' }}">

      <label>Telegram</label>
      <input name="telegram" value="{{ agent.telegram if agent else '' }}">

      <label>WhatsApp (numero o link wa.me)</label>
      <input name="whatsapp" value="{{ agent.whatsapp if agent else '' }}">
    </div>

    <div>
      <h3>Indirizzi</h3>
      <label>Indirizzi (max 3, uno per riga)</label>
      <textarea name="addresses" rows="4">{{ agent.addresses if agent else '' }}</textarea>

      <h3>Media</h3>

      <label>Foto profilo</label>
      {% if agent and agent.photo %}
        <p class="hint">Attuale: {{ agent.photo }}</p>
        <input type="hidden" name="photo_old" value="{{ agent.photo }}">
      {% else %}
        <input type="hidden" name="photo_old" value="">
      {% endif %}
      <input type="file" name="photo" accept="image/*">

      <label>PDF 1</label>
      {% if agent and agent.pdf1 %}
        <p class="hint">Attuale: {{ agent.pdf1 }}</p>
        <input type="hidden" name="pdf1_old" value="{{ agent.pdf1 }}">
      {% else %}
        <input type="hidden" name="pdf1_old" value="">
      {% endif %}
      <input type="file" name="pdf1" accept="application/pdf">

      <label>PDF 2</label>
      {% if agent and agent.pdf2 %}
        <p class="hint">Attuale: {{ agent.pdf2 }}</p>
        <input type="hidden" name="pdf2_old" value="{{ agent.pdf2 }}">
      {% else %}
        <input type="hidden" name="pdf2_old" value="">
      {% endif %}
      <input type="file" name="pdf2" accept="application/pdf">
    </div>

    <div class="full-width">
      <button type="submit" class="btn primary">Salva</button>
    </div>

  </form>
</div>
{% endblock %}
